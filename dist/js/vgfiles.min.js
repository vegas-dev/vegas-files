"use strict";window.VegasFiles={container:".vg-files",defaults:{limits:{count:0,sizes:0}},files:[],fileList:[],init:function init(){},change:function change(a){var b=a.closest(this.container),c=b.find(this.container+"__info"),d=c.find(this.container+"__info--name"),e=a[0].files,f=b.find("label").attr("for"),g="accept=\""+a.attr("accept")+"\""||"",h=[];if(d.find("li").remove(),e.length&&(a.removeAttr("id"),a.removeAttr("data-toggle"),a.addClass("vg-files__fake"),b.append("<input type=\"file\" name=\"files[]\" id=\""+f+"\" data-toggle=\"vg-files\" "+g+" multiple>"),h=this.append(e)),h.length){c.fadeIn().css("display","block"),c.find(this.container+"__info--count").html(h.length+"<span>["+this.getSizes(h,!0)+"]</span>");for(var j,k=0;k<=h.length-1;k++)j=this.getSizes(h[k].size),d.append("<li><span>"+(k+1)+".</span><span>"+h[k].name+"</span><span>["+j+"]</span></li>")}return!1},append:function append(a){this.files.push(a);for(var b=[],c=0;c<=this.files.length-1;c++)$.map(this.files[c],function(a){b.push(a)});return b},clear:function clear(a){var b=a.closest(this.container);return b.find(this.container+"__fake").remove(),b.find(this.container+"__info").fadeOut(),b.find(this.container+"__info--name li").remove(),this.files=[],!1},getSizes:function getSizes(a){var b=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],c=a/1024,d=c/1024,e=d/1024,f=0;if(f=1024>=c?c.toFixed(3)+" Kb":1024<=c&&1024>=d?d.toFixed(3)+" Mb":1024<=d&&1024>=e?e.toFixed(3)+" Gb":(e/1024).toFixed(3)+" Tb",b){var g=[];$.map(a,function(a){g.push(a.size)}),f=g.reduce(function(c,a){return c+a}),f=VegasFiles.getSizes(f)}return f}},$(document).on("change","[data-toggle=vg-files]",function(){return VegasFiles.change($(this)),!1}),$(document).on("click","[data-dismiss=vg-files]",function(){return VegasFiles.clear($(this)),!1});
