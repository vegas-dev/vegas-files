"use strict";window.VegasFiles={container:".vg-files",defaults:{limits:{count:0,sizes:0},image:!1,types:["image/png","image/jpeg","image/bmp","image/ico","image/gif","image/jfif","image/tiff"]},files:[],fileList:[],init:function init(a){VegasFiles.defaults.limits.count=a.data("count")||VegasFiles.defaults.limits.count,VegasFiles.defaults.limits.size=a.data("size")||VegasFiles.defaults.limits.size,VegasFiles.defaults.image=a.data("image-preview")||!1},change:function change(a){var b=a.closest(this.container),c=b.find(this.container+"__info"),d=c.find(this.container+"__info--name"),e=c.find(this.container+"__info--image"),f=a[0].files,g=b.find("label").attr("for"),h="accept=\""+a.attr("accept")+"\""||"",j=[];if(d.find("li").remove(),e.find("span").remove(),f.length&&(1!==VegasFiles.defaults.limits.count&&(a.removeAttr("id"),a.removeAttr("data-toggle"),a.addClass("vg-files__fake"),b.append("<input type=\"file\" name=\"files[]\" id=\""+g+"\" data-toggle=\"vg-files\" "+h+" multiple>")),j=this.append(f)),j.length){c.fadeIn().css("display","block"),c.find(this.container+"__info--count").html(j.length+"<span>["+this.getSizes(j,!0)+"]</span>");for(var k=0;k<=j.length-1;k++){if(VegasFiles.defaults.image&&this.checkType(j[k].type)){var i=URL.createObjectURL(j[k]);e.append("<span><img src=\""+i+"\" alt=\"#\"></span>")}var l=this.getSizes(j[k].size);d.append("<li><span>"+(k+1)+".</span><span>"+j[k].name+"</span><span>["+l+"]</span></li>")}}return!1},append:function append(a){return this.files.push(a),function(a,b){for(var c=[],d=0;d<=a.length-1;d++)$.map(a[d],function(a,d){0===b?c.push(a):d+1<=b&&c.unshift(a)});return 0<b&&c.length>b&&c.splice(b,c.length-b),c}(this.files,VegasFiles.defaults.limits.count)},checkType:function checkType(a){return VegasFiles.defaults.types.includes(a)},getSizes:function getSizes(a){var b=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],c=a/1024,d=c/1024,e=d/1024,f=0;if(f=1024>=c?c.toFixed(3)+" Kb":1024<=c&&1024>=d?d.toFixed(3)+" Mb":1024<=d&&1024>=e?e.toFixed(3)+" Gb":(e/1024).toFixed(3)+" Tb",b){var g=[];$.map(a,function(a){g.push(a.size)}),f=g.reduce(function(c,a){return c+a}),f=VegasFiles.getSizes(f)}return f},clear:function clear(a){var b=a.closest(this.container);return b.find("[type=\"file\"]").val(""),b.find(this.container+"__fake").remove(),b.find(this.container+"__info").fadeOut(),b.find(this.container+"__info--name li").remove(),b.find(this.container+"__info--image span").remove(),this.files=[],!1}},$(document).ready(function(){var a=$(".vg-files");a.length&&a.each(function(){VegasFiles.init($(this))})}),$(document).on("change","[data-toggle=vg-files]",function(){return VegasFiles.change($(this)),!1}),$(document).on("click","[data-dismiss=vg-files]",function(){return VegasFiles.clear($(this)),!1});
