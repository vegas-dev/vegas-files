// @vegas-VGFiles v1.1.1
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).window=e.window||{})}(this,(function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,s=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw s}}}}var r=function(){function e(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t(this,e),this.container=n||void 0,this.classes={container:"vg-files",label:"vg-files-label",info:"vg-files-info",images:"vg-files-info--images",list:"vg-files-info--list",fake:"vg-files-fake"},this.settings=Object.assign({limits:{count:0,sizes:0},isImage:!1,isInfo:!0,types:["image/png","image/jpeg","image/bmp","image/ico","image/gif","image/jfif","image/tiff"]},i),this.files=[],this.container){var a=function(e,t,n){document.addEventListener(e,(function(e){for(var i=r.container.querySelectorAll(t),a=e.target,s=-1;a&&-1===(s=Array.prototype.indexOf.call(i,a));)a=a.parentElement;s>-1&&function(){"function"==typeof n&&n(a),e.preventDefault()}.call(a,e)}))};this.id=this.container.querySelector("[data-vg-toggle]").getAttribute("id")||void 0,this.name=this.container.querySelector("[data-vg-toggle]").getAttribute("name")||void 0,this.accept=this.container.querySelector("[data-vg-toggle]").getAttribute("accept")||void 0,this.settings.isImage=this.container.dataset.imagePreview||!1,this.settings.Info="false"!==this.container.dataset.infoList;var r=this;a("change",'[data-vg-toggle="files"]',(function(e){r.change(e)})),a("click",'[data-dismiss="vg-files"]',(function(e){r.clear(!0)}))}}var i,r,s;return i=e,r=[{key:"change",value:function(e){var t=this,n=e.files,i=[];if(t.clear(),n.length){if(1!==t.settings.limits.count){e.removeAttribute("id"),e.removeAttribute("data-vg-toggle"),e.classList.add(t.classes.fake),e.onchange=null;var a=t.accept?'accept="'+t.accept+'"':"";t.container.insertAdjacentHTML("beforeEnd",'<input type="file" name="'+t.name+'" id="'+t.id+'" data-vg-toggle="files" '+a+" multiple>")}if((i=t.append(n)).length){var r=t.container.querySelector("."+this.classes.info);r.classList.add("show");var s=r.querySelector("."+t.classes.info+"--wrapper-count");s&&(s.innerHTML=i.length+"<span>["+t.getSizes(i,!0)+"]</span>"),t.setImages(i),t.setInfoList(i)}}}},{key:"append",value:function(e){var t=this;return t.files.push(e),function(e,t){for(var n=[],i=0;i<=e.length-1;i++){var r,s=1,o=a(e[i]);try{for(o.s();!(r=o.n()).done;){var l=r.value;0===t?n.push(l):s<=t&&n.unshift(l),s++}}catch(e){o.e(e)}finally{o.f()}}return t>0&&n.length>t&&n.splice(t,n.length-t),n}(t.files,t.settings.limits.count)}},{key:"setImages",value:function(e){var t=this;if(t.settings.isImage){var n=t.container.querySelector("."+t.classes.info);if(n){var i=n.querySelector("."+t.classes.images);i||((i=document.createElement("div")).classList.add(t.classes.images),n.prepend(i));var r,s=a(e);try{for(s.s();!(r=s.n()).done;){var o=r.value;if(this.checkType(o.type)){var l=URL.createObjectURL(o);i.insertAdjacentHTML("beforeEnd",'<span><img src="'+l+'" alt="#"></span>')}}}catch(e){s.e(e)}finally{s.f()}}}}},{key:"setInfoList",value:function(e){var t=this;if(t.settings.isInfo){var n=t.container.querySelector("."+t.classes.info);if(n){var i=document.createElement("div");i.classList.add(t.classes.list),n.append(i);var r,s=1,o=a(e);try{for(o.s();!(r=o.n()).done;){var l=r.value,c=this.getSizes(l.size);i.insertAdjacentHTML("beforeEnd","<li><span>"+s+".</span><span>"+l.name+"</span><span>["+c+"]</span></li>"),s++}}catch(e){o.e(e)}finally{o.f()}}}}},{key:"checkType",value:function(e){return this.settings.types.includes(e)}},{key:"getSizes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this,i=e/1024,a=i/1024,r=a/1024,s=r/1024,o=0;if(o=i<=1024?i.toFixed(3)+" Kb":i>=1024&&a<=1024?a.toFixed(3)+" Mb":a>=1024&&r<=1024?r.toFixed(3)+" Gb":s.toFixed(3)+" Tb",t){var l=[];e.map((function(e){l.push(e.size)})),o=l.reduce((function(e,t){return e+t})),o=n.getSizes(o)}return o}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this,n=t.container.querySelector("."+this.classes.info);if(n){if(t.settings.isImage){var i=n.querySelector("."+this.classes.images);if(i){var r=i.querySelectorAll("span");if(r.length){var s,o=a(r);try{for(o.s();!(s=o.n()).done;){var l=s.value;l.parentNode.removeChild(l)}}catch(e){o.e(e)}finally{o.f()}}}}if(t.settings.isInfo){var c=n.querySelector("."+this.classes.list);if(c){var f=c.querySelectorAll("li");if(f.length){var u,v=a(f);try{for(v.s();!(u=v.n()).done;){var g=u.value;g.parentNode.removeChild(g)}}catch(e){v.e(e)}finally{v.f()}}}}}if(e){t.container.querySelector('[type="file"]').value="";var d=t.container.querySelectorAll("."+t.classes.fake);if(d.length){var h,y=a(d);try{for(y.s();!(h=y.n()).done;){var p=h.value;p.remove()}}catch(e){y.e(e)}finally{y.f()}}n&&n.classList.remove("show"),t.files=[]}}}],r&&n(i.prototype,r),s&&n(i,s),Object.defineProperty(i,"prototype",{writable:!1}),e}();document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelectorAll(".vg-files");if(e.length){var t,n=a(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;new r(i)}}catch(e){n.e(e)}finally{n.f()}}})),e.VGFiles=r}));
